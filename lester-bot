import discord
from discord.ext import commands
import google.generativeai as genai
import os

# O Render vai ler estes valores das "Environment Variables" que vamos configurar
TOKEN_DISCORD = os.getenv("TOKEN_DISCORD")
CHAVE_IA = os.getenv("CHAVE_IA")

# Configura√ß√£o da IA (Gemini 1.5 Flash)
genai.configure(api_key=CHAVE_IA)
model = genai.GenerativeModel('gemini-1.5-flash')

intents = discord.Intents.default()
intents.message_content = True
bot = commands.Bot(command_prefix='!', intents=intents)

@bot.event
async def on_ready():
    print(f'üï∂Ô∏è Lester na nuvem! Delegado Torcato no comando.')

@bot.command()
async def lester(ctx, *, pergunta):
    prompt = f"Tu √©s o Lester do GTA V. √âs sarc√°stico e ajudas a turma 10 CNT da Rocha Peixoto. Responde a isto: {pergunta}"
    try:
        response = model.generate_content(prompt)
        await ctx.send(f"ü§ñ **Lester AI:** {response.text}")
    except Exception as e:
        await ctx.send(f"‚ùå Erro no sistema: {e}")

@bot.command()
async def delegado(ctx):
    await ctx.send("üëÆ‚Äç‚ôÇÔ∏è **O Boss desta opera√ß√£o √© o Torcato Maravalhas da 10 CNT.**")

bot.run(TOKEN_DISCORD)
